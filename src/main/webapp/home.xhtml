<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:f1="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
   <title>#{msgs.homeTitle}</title>
   <style type="text/css">
      .user-list {
         width: 15%;
         min-height: 100%;
         overflow: scroll;
      }

      .message-list {
         width: 85%;
      }

      .top-alignment {
         vertical-align: top;
      }

   </style>
</h:head>
<h:body>
   <h:form>
      <h:commandButton value="#{msgs.homeLogoutButton}" action="#{home.doLogout}"/>
      <br/>

   </h:form>
   <h:panelGrid style="width: 100%; height: 100%"
                columns="2" border="1" cellpadding="10" cellspacing="1"
                columnClasses="user-list top-alignment, message-list top-alignment">
      <h:column>
         <h:outputText value="#{msgs.usersListTitle}"
                       style="font-style: italic; font-size: 1.5rem"/>
         <h:form id="visualCheckbox">
            <h:selectManyCheckbox value="#{userListBean.selectedUsers}" layout="pageDirection">
               <c:forEach items="#{userListBean.namesList}" var="userobj">
                  <f:selectItem itemValue="#{userobj.username}"
                                itemLabel="#{userobj.online ? 'o':'x'} - #{userobj.username}"/>
               </c:forEach>
            </h:selectManyCheckbox>
            <h:commandButton value="New Message" action="#{userListBean.printNamesSelected}"/>
         </h:form>

      </h:column>

      <h:column>
         Messages here
      </h:column>



   </h:panelGrid>

   <h:form>
      <f:websocket channel="UserListChannel">
         <f:ajax event="UpdateListEvent"
                 execute=":visualCheckbox"
                 render=":visualCheckbox"/>
      </f:websocket>
   </h:form>

   <!-- Saltos de linea -->
   <br />
   <br />
   <!-- Inbox -->
   <h:outputText id="titleInbox" value="#{msgs.inboxTitle}" />
   <!-- Saltos de linea -->
   <br />
   <br />
   <!-- Lista de mensajes -->
   <h:form id="visualInbox">
      <h:selectOneListbox id="list" size="10"
                          value="#{inboxBean.todo}"
                          valueChangeListener="#{inboxBean.valueChanged}"
                          onchange="submit()">
         <f1:selectItems value="#{inboxBean.data}"/>
      </h:selectOneListbox>
      <!-- Detalle de mensaje seleccionado -->
      <h:inputTextarea value="#{inboxBean.message}" cols="30" rows="10" disabled="true"/>
   </h:form>
</h:body>
</html>
